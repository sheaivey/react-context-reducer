{"version":3,"file":"dev.js","sources":["../src/utils/logging.js","../src/core/core.js","../src/core/contextDecorator.js","../src/core/withContextProviders.js","../src/core/useContexts.js","../src/core/connectContexts.js","../src/contextReducer/combineReducers.js","../src/contextReducer/ReduxDevToolsMiddleWare.js","../src/contextReducer/createContextReducer.js"],"sourcesContent":["export const msg = (text) => {\n  return `react-context-store: ${text}`;\n};\n\nexport const warning = (text) => {\n  if (process.env.NODE_ENV !== 'production') {\n    console.error(msg(text));\n  }\n};\n","import { msg, warning } from '../utils/logging';\n\n// global react-context-reducer contexts\nconst registeredContexts = {};\n\nexport const registerContext = (decoratedContext) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (registeredContexts[decoratedContext.contextKey]) {\n      throw new Error(msg(`A decoratedContext already exists with the supplied contextKey \"${decoratedContext.contextKey}\".`));\n    }\n\n    const requiredKeys = ['contextKey', 'Context', 'Provider', 'use'];\n    const missingKeys = [];\n    requiredKeys.forEach((key) => {\n      if (!decoratedContext[key]) {\n        missingKeys.push(key);\n      }\n    });\n    if (missingKeys.length) {\n      throw new Error(msg(`The provided decoratedContext did not supply the following properties \"${missingKeys.join('\", \"')}\". Did you forget to use \"contextDecorator(contextKey, Context, Provider, extra)\"?`));\n    }\n  }\n  registeredContexts[decoratedContext.contextKey] = decoratedContext;\n};\n\nexport const removeContext = (contextKey) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!registeredContexts[contextKey]) {\n      warning(`The contextKey \"${contextKey}\" could not be removed because it does not exist.`);\n    }\n  }\n  delete registeredContexts[contextKey];\n};\n\nexport const getContext = (contextKey) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!registeredContexts[contextKey]) {\n      throw new Error(msg(`The contextKey \"${contextKey}\" has not yet been added. Be sure your context store has been added with \"registerContext(...)\" before trying to use it. `));\n    }\n  }\n  return registeredContexts[contextKey];\n};\n\nexport const getContexts = (contextKeys) => {\n  if (!contextKeys) {\n    // return all registered decoratedContexts\n    return registeredContexts;\n  }\n  // only get the requested decoratedContexts\n  const stores = {};\n  contextKeys.forEach((contextKey) => {\n    stores[contextKey] = getContext(contextKey);\n  });\n  return stores;\n};\n","import React, { useContext } from 'react';\nimport { msg } from '../utils/logging';\nimport { getContext } from './core';\n\nconst contextDecorator = (contextKey, Context, Provider, extra = {}) => {\n  return {\n    ...extra,\n    contextKey: contextKey,\n    Context: Context,\n    connect: (\n      mapStoreToProps = () => {}\n    ) => (WrappedComponent) => {\n      return props => {\n        const value = getContext(contextKey).use();\n        return (\n          <WrappedComponent\n            {...mapStoreToProps(value, props)}\n          />\n        );\n      };\n    },\n    use: () => {\n      const value = useContext(Context);\n      if (process.env.NODE_ENV !== 'production') {\n        if (!value) {\n          throw new Error(msg(`The contextKey \"${contextKey}\" has not been provided for consumption. Be sure to wrap your app with the HOC \"withContextProviders()(App)\" before trying to consume a context.`));\n        }\n      }\n      return value;\n    },\n    Provider: Provider\n  };\n};\n\nexport default contextDecorator;\n","import React from 'react';\nimport { getContext, getContexts } from './core';\n\n// recursively wraps a component with all provided contextKeys.\nconst recursiveProvider = (WrappedComponent, contextKeys) => {\n  if (contextKeys.length === 0) {\n    return (props) => (<WrappedComponent {...props} />);\n  }\n  const contextKey = contextKeys.pop();\n  const Provider = getContext(contextKey).Provider;\n  const Component = recursiveProvider(WrappedComponent, contextKeys);\n  return (props) => (\n    <Provider>\n      <Component {...props} />\n    </Provider>\n  );\n};\n\nconst withContextStoreProviders = (contextKeys) => (WrappedComponent) => {\n  return recursiveProvider(WrappedComponent, contextKeys || Object.keys(getContexts()));\n};\n\nexport default withContextStoreProviders;\n","import { getContext } from './core';\nimport { msg } from '../utils/logging';\n\nexport const useContext = (contextKey) => {\n  return getContext(contextKey).use();\n};\n\nconst useContexts = (contextKeys) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (!Array.isArray(contextKeys)) {\n      throw new Error(msg(`You must provide an array of contextKeys to use.`));\n    }\n    if (contextKeys.length === 0) {\n      throw new Error(msg(`You must provide at least one contextKey to use.`));\n    }\n  }\n  const stores = [];\n  contextKeys.forEach((contextKey) => {\n    const value = useContext(contextKey);\n    stores.push(value);\n  });\n  return stores;\n};\n\nexport default useContexts;\n","import React from 'react';\nimport { getContext } from './core';\nimport { msg } from '../utils/logging';\n\nconst connectContexts = (\n  contextKeys = [],\n  mapContextStoreToProps = () => ({})\n) => (WrappedComponent) => {\n  return props => {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!Array.isArray(contextKeys)) {\n        throw new Error(msg(`You must provide an array of contextKeys to connect.`));\n      }\n      if (contextKeys.length === 0) {\n        throw new Error(msg(`You must provide at least one contextKey to connect.`));\n      }\n    }\n    const stores = [];\n    contextKeys.forEach((contextKey) => {\n      const value = getContext(contextKey).use();\n      stores.push(value);\n    });\n    return (\n      <WrappedComponent\n        {...mapContextStoreToProps(stores, props)}\n      />\n    );\n  };\n};\n\nexport default connectContexts;\n","import { warning, msg } from '../utils/logging';\n\n// modified combineReducers from Redux: https://github.com/reduxjs/redux/blob/master/src/combineReducers.js\nconst combineReducers = (reducers) => {\n  const reducerKeys = Object.keys(reducers);\n  const finalReducers = {};\n  for (let i = 0; i < reducerKeys.length; i++) {\n    const key = reducerKeys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(`No reducer provided for key \"${key}\"`);\n      }\n    }\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        warning(`The reducer provided for key \"${key}\" is not a function.`);\n      }\n    }\n  }\n  const finalReducerKeys = Object.keys(finalReducers);\n\n  return function combination(state = {}, action) {\n    let hasChanged = false;\n    const nextState = {};\n    for (let i = 0; i < finalReducerKeys.length; i++) {\n      const key = finalReducerKeys[i];\n      const reducer = finalReducers[key];\n      const previousStateForKey = state[key];\n      const nextStateForKey = reducer(previousStateForKey, action);\n      if (process.env.NODE_ENV !== 'production') {\n        if (typeof nextStateForKey === 'undefined') {\n          throw new Error(msg('reducers should always return a state other then \"undefined\"'));\n        }\n      }\n      nextState[key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n};\n\nexport default combineReducers;\n","const reduxDevToolsActions = {\n  ReplaceState: '@@REPLACE_STATE'\n};\n\nconst defaultConfig = {\n  features: {\n    dispatch: true,\n    persist: false,\n    reorder: false,\n    skip: true,\n    jump: true,\n    import: false,\n    export: false,\n    test: false\n  }\n};\n\nexport default (store, reducer, options = {}) => {\n  if (window.__REDUX_DEVTOOLS_EXTENSION__) {\n    const extension = window.__REDUX_DEVTOOLS_EXTENSION__.connect({ ...defaultConfig, ...options });\n    extension.init(store.getState());\n    extension.subscribe((message, extra) => {\n      if (message.type === 'DISPATCH' && message.payload) {\n        switch (message.payload.type) {\n          case 'TOGGLE_ACTION':\n          case 'JUMP_TO_ACTION':\n          case 'JUMP_TO_STATE':\n            // replaying global state\n            const state = JSON.parse(message.state);\n            store.dispatch({ type: reduxDevToolsActions.ReplaceState, data: state });\n        }\n      }\n    });\n    return (state, action) => {\n      const nextState = action.type === reduxDevToolsActions.ReplaceState ? action.data : reducer(state, action);\n      if (action.type === reduxDevToolsActions.ReplaceState) {\n        return nextState; // dont do anything\n      }\n      extension.send(action, nextState);\n      return nextState; // dont do anything\n    };\n  }\n  return (state, action) => {\n    const nextState = reducer(state, action);\n    console.log(`Action Triggered: ${action.type} [${options.name || ''}]`, action);\n    return nextState;\n  };\n};\n","import React, { createContext, useReducer } from 'react';\nimport PropTypes from 'prop-types';\nimport { contextDecorator } from '../core';\nimport { msg } from '../utils/logging';\n\nimport reduxDevToolsMiddleware from './ReduxDevToolsMiddleWare';\n\nconst createContextReducer = (contextKey, reducer, middlewares = false) => {\n  const Context = createContext();\n  const initialState = reducer(undefined, { type: '@@INIT' }); // returns initialState\n  const WrappedContext = contextDecorator(\n    contextKey,\n    Context,\n    (props) => {},\n    {\n      getInitialState: () => initialState,\n      getState: () => initialState, // overloaded\n      dispatch: (action) => {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(msg(`The contextKey \"${contextKey}\" has not been provided for consumption. Be sure to wrap your app with the HOC \"withContextProviders()(App)\" before trying to consume a context.`));\n        }\n      } // overloaded\n    }\n  );\n\n  let enhancedReducer = reduxDevToolsMiddleware(\n    {\n      getState: WrappedContext.getState,\n      dispatch: (action) => WrappedContext.dispatch(action)\n    },\n    reducer,\n    { // reduxDevTools options\n      name: contextKey\n    }\n  );\n\n  WrappedContext.Provider = (props) => { /* Provider HoC */\n    const value = useReducerStore(WrappedContext, enhancedReducer, initialState, middlewares);\n    return (\n      <Context.Provider value={value}>\n        {props.children}\n      </Context.Provider>\n    );\n  };\n  WrappedContext.Provider.propTypes = {\n    children: PropTypes.any\n  };\n  return WrappedContext;\n};\n\nexport default createContextReducer;\n\nconst useReducerStore = (WrappedContext, reducer, initialState, middlewares) => {\n  // TODO: this function gets called over and over rebuilding middleware and updating .getState() .dispatch()\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  let enhancedDispatch = dispatch;\n  if (middlewares && Array.isArray(middlewares) && middlewares.length) {\n    const middlewareAPI = {\n      getState: () => state,\n      dispatch: action => dispatch(action)\n    };\n    const chain = middlewares.map(middleware => middleware(middlewareAPI));\n    enhancedDispatch = compose(...chain)(dispatch);\n  }\n\n  const finalDispatch = (action) => enhancedDispatch(action);\n  // experimental Reducer Store API\n  WrappedContext.getState = () => state;\n  WrappedContext.dispatch = (action) => enhancedDispatch(action);\n  return [ state, finalDispatch ];\n};\n\nconst compose = (...funcs) => x =>\n  funcs.reduceRight((composed, f) => f(composed), x);\n"],"names":["msg","text","warning","console","error","registeredContexts","registerContext","decoratedContext","contextKey","Error","requiredKeys","missingKeys","forEach","key","push","length","join","getContext","getContexts","contextKeys","stores","contextDecorator","Context","Provider","extra","connect","mapStoreToProps","WrappedComponent","props","value","use","React","useContext","recursiveProvider","pop","Component","withContextStoreProviders","Object","keys","useContexts","Array","isArray","connectContexts","mapContextStoreToProps","combineReducers","reducers","reducerKeys","finalReducers","i","finalReducerKeys","combination","state","action","hasChanged","nextState","reducer","previousStateForKey","nextStateForKey","reduxDevToolsActions","ReplaceState","defaultConfig","features","dispatch","persist","reorder","skip","jump","test","store","options","window","__REDUX_DEVTOOLS_EXTENSION__","extension","init","getState","subscribe","message","type","payload","JSON","parse","data","send","log","name","createContextReducer","middlewares","createContext","initialState","undefined","WrappedContext","getInitialState","enhancedReducer","reduxDevToolsMiddleware","useReducerStore","children","propTypes","PropTypes","any","useReducer","enhancedDispatch","middlewareAPI","chain","map","middleware","compose","finalDispatch","funcs","x","reduceRight","composed","f"],"mappings":"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"}